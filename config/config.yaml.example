# Event source
scraping:
  url: "https://www.richmond.gov.uk/services/parking/cpz/twickenham_events"

# Rules for determining when an event is over
event_rules:
  end_of_day_cutoff: "23:00" # Time to consider all events for the day over
  next_event_delay_hours: 1 # Hours after an event starts before it's considered over (if another event follows)

# MQTT Configuration
mqtt:
  enabled: true
  broker_url: "${MQTT_BROKER_URL}" # Environment variable: your-broker.example.com
  broker_port: 8883
  client_id: "${MQTT_CLIENT_ID}" # Environment variable: your_client_id
  security: "username"

  # Authentication settings
  auth:
    username: "${MQTT_USERNAME}" # Environment variable
    password: "${MQTT_PASSWORD}" # Environment variable

  # TLS settings
  tls:
    ca_cert: null # Path to CA certificate if needed
    client_cert: null # Path to client certificate if needed
    client_key: null # Path to client key if needed
    verify: false # Set to true for production

  topics:
    next: "twickenham_events/events/next"
    next_day_summary: "twickenham_events/events/next_day_summary"
    all_upcoming: "twickenham_events/events/all_upcoming"
    status: "twickenham_events/status"

# Home Assistant Integration
home_assistant:
  enabled: true
  discovery_prefix: "homeassistant" # Default Home Assistant discovery topic

# Event Name Shortening (AI-powered)
ai_shortener:
  enabled: true
  api_key: ${GEMINI_API_KEY}
  model: gemini-2.5-pro
  max_length: 25
  flags_enabled: true
  standardize_spacing: true
  prompt_template: >
    You are an expert editor. Your task is to shorten event names
    to fit within {char_limit} display units while keeping them recognizable.
    Count regular characters as 1 unit each, and flag emojis as 2 units each.
    The events are usually rugby matches, but can also be concerts.
    Use standard abbreviations. IMPORTANT: Always capitalize country abbreviations
    (ENG, AUS, NZ, ARG, RSA, FRA, ITA, WAL, SCO, IRE, FIJ, etc.).
    {flag_instructions}

    Examples:
    fixture: Women's Rugby World Cup Final
    fixture_short: W RWC Final

    {flag_examples}

    fixture: Taylor Swift | The Eras Tour
    fixture_short: Taylor Swift

    fixture: Harlequins Big Game
    fixture_short: Quins Big Game
    ---
    Now, shorten this event name:
    fixture: {event_name}
    fixture_short:
